<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Together</title>
    <link rel="stylesheet" href="/youtube.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">    
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen active">
        <div class="welcome-container">
            <h1>üé¨ YouTube Together</h1>
            <p>Watch YouTube videos with your friends in real-time!</p>
            
            <div class="welcome-options">
                <div class="option-card">
                    <h2>Create Room</h2>
                    <input type="text" id="create-username" placeholder="Enter your name" maxlength="20">
                    <button id="create-room-btn" class="btn btn-primary">Create Room</button>
                </div>

                <div class="divider">OR</div>

                <div class="option-card">
                    <h2>Join Room</h2>
                    <input type="text" id="join-username" placeholder="Enter your name" maxlength="20">
                    <input type="text" id="room-id-input" placeholder="Enter Room ID" maxlength="6">
                    <button id="join-room-btn" class="btn btn-secondary">Join Room</button>
                </div>
            </div>

            <div id="error-message" class="error-message"></div>
        </div>
    </div>

    <!-- Room Screen -->
    <div id="room-screen" class="screen">
        <div class="room-header">
            <div class="room-info">
                <div class="room-id-container">
                    <h2>Room ID: <span id="room-id-display"></span></h2>
                    <button id="copy-room-id-btn" class="btn-copy" title="Copy Room ID">
                        üìã Copy
                    </button>
                </div>
                <p>Welcome, <span id="username-display"></span>!</p>
                <p id="master-status" class="master-status"></p>
            </div>
            <button id="leave-room-btn" class="btn btn-danger">Leave Room</button>
        </div>

        <div class="main-content">
            <!-- Video Section -->
            <div class="video-section">
                <div class="video-input">
                    <input type="text" id="video-url-input" placeholder="Paste YouTube URL here">
                    <button id="load-video-btn" class="btn btn-primary">Load Video</button>
                </div>

                <div id="video-container">
                    <div id="player-placeholder">
                        <div class="placeholder-content">
                            <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M23 7l-7 5 7 5V7z"></path>
                                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                            </svg>
                            <p>Paste a YouTube URL above to start watching</p>
                        </div>
                    </div>
                    <div id="player"></div>
                </div>

                <!-- Users in Room -->
                <div class="users-panel">
                    <h3>Users in Room (<span id="user-count">0</span>)</h3>
                    <div id="users-list"></div>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="chat-section">
                <div class="chat-header">
                    <h3>Live Chat</h3>
                </div>
                <div id="chat-messages" class="chat-messages"></div>
                <div class="chat-input">
                    <input type="text" id="chat-input" placeholder="Type a message..." maxlength="200">
                    <button id="send-chat-btn" class="btn btn-primary">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Copy Success Toast -->
    <div id="copy-toast" class="copy-toast">
        ‚úÖ Room ID copied to clipboard!
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>


<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBMz7pxtjBBwYajEfEhBhF7ADYOgEQX_Po",
    authDomain: "popcorntogether-fd170.firebaseapp.com",
    projectId: "popcorntogether-fd170",
    storageBucket: "popcorntogether-fd170.appspot.com",
    messagingSenderId: "450280562009",
    appId: "1:450280562009:web:9774f54f522f6a34378048"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  firebase.auth().onAuthStateChanged((user) => {
    if (!user) {
      // ‚ùå not logged in ‚Üí redirect (NO BACK POSSIBLE)
      window.location.replace("/Login.html");
    } else {
      // ‚úÖ logged in ‚Üí show page
      document.body.style.display = "block";
    }
  });
</script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/app.js"></script>
</body>
</html>