<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Details - PopCornTogether</title>
  <link rel="stylesheet" href="/style.css">
<link rel="stylesheet" href="/movies.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">



</head>
<body>

  <!-- Navbar -->
  <header>
    <!-- Logo -->
    <a class="lg" href="/movies.html">
      <span class="pop">PopCorn</span><span class="together">Together</span>
    </a>
    
    <!-- Mobile Menu Toggle (Hamburger) -->
    <div class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()">
      <span></span>
      <span></span>
      <span></span>
    </div>
    
    <!-- Navigation Menu -->
    <nav id="nav">
      <ul class="nav_links">
        <li><a href="/index.html">Home</a></li>
        <li><a href="/movies.html" class="active">Movies</a></li>
        <li><a href="/room.html">Upload and Watch</a></li>
        <li><a href="/youtube.html">Watch Youtube</a></li>
        <li><a href="/ai-recommendation.html">AI Recommendation</a></li>
        
        <!-- Mobile-only auth section inside hamburger menu -->
        <li class="mobile-auth-section">
          <!-- Logged-out state (shows only login button) -->
          <div id="mobileLoginSection" class="mobile-login-wrapper">
            <a href="/Login.html" class="mobile-login-btn">
              <button>Login</button>
            </a>
          </div>
          
          <!-- Logged-in state (shows username and logout) -->
          <div id="mobileUserSection" class="mobile-user-wrapper" style="display:none;">
            <div class="mobile-username" id="mobileUsername"></div>
            <button id="mobileLogoutBtn" class="mobile-logout-btn">Logout</button>
          </div>
        </li>
      </ul>
    </nav>
    
    <!-- Desktop auth area (visible only on desktop) -->
    <div class="auth-area desktop-auth">
      <!-- Logged-in user display -->
      <div id="desktopUserBox" class="desktop-user-box" style="display:none;">
        <span id="desktopUsername"></span>
        <button id="desktopLogoutBtn">Logout</button>
      </div>

      <!-- Login button (shown when logged out) -->
      <a class="cta" id="desktopLoginBtn" href="/Login.html" style="display:inline-block;">
        <button>Login</button>
      </a>
    </div>
  </header>

  <!-- Movie Detail Container -->
  <div class="movie-detail-container" id="movieDetailContainer">
    <div class="loading" style="min-height: 100vh; justify-content: center; align-items: center; display: flex;">
      <div class="spinner"></div>
      <span>Loading movie details...</span>
    </div>
  </div>

  <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBMz7pxtjBBwYajEfEhBhF7ADYOgEQX_Po",
    authDomain: "popcorntogether-fd170.firebaseapp.com",
    projectId: "popcorntogether-fd170",
    storageBucket: "popcorntogether-fd170.appspot.com",
    messagingSenderId: "450280562009",
    appId: "1:450280562009:web:9774f54f522f6a34378048"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  firebase.auth().onAuthStateChanged((user) => {
    if (!user) {
      // ❌ not logged in → redirect (NO BACK POSSIBLE)
      window.location.replace("/Login.html");
    } else {
      // ✅ logged in → show page
      document.body.style.display = "block";
    }
  });
</script>

<!-- EXISTING AUTH LOGIC -->
<script src="./index.js"></script>

<!-- Movie detail logic -->
<script src="./movie.js"></script>
<script src="/custom-cursor.js"></script>

</body>
</html>